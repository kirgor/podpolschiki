# Немного о webdriver.io:

[Webdriver.io](http://webdriver.io/) - надстройка над Selenium, берущая на себя многие заботы по тестированию в браузерах. Вот некоторые возможности:

* **Запуск тестов параллельно в нескольких браузерах**, причем все гибко настраивается. Пример - у нас есть 10 тестов, мы можем легко запустить одновременно 10 копий Chrome, 10 копий Firefox и т.д. и все тесты будут гоняться параллельно. Так время выполнения можно заметно сократить.
* **Отчет о тестах для различных CI (Jenkins, TeamCity)** - результаты работы теста могут выводиться в нужном формате, таком что сервер CI поймет и правильно отобразит какие тесты упали. Это очень здорово для встраивания в регулярные билды.
* **Более удобные функции для написания тестов** (хотя может кому как) - функции в [selenium-webdriver](https://www.npmjs.com/package/selenium-webdriver) вполне понятные, но не совсем удобные. Вот пример из [странички webdriver.io на npm](https://www.npmjs.com/package/webdriverio#syntax-example):
```js
// webdriver.io:
browser.url('http://google.com');
$('#q').setValue('webdriver');
$('#btnG').click();

// selenium-webdriver:
driver.get('http://www.google.com');
driver.findElement(webdriver.By.id('q')).sendKeys('webdriver');
driver.findElement(webdriver.By.id('btnG')).click();
```
* **С помощью него можно писать тесты для мобильных приложений** (с этим предстоит разобраться...)
* **Прочие удобства** типа автоматического создания скриншотов в случае ошибок.

# Как установить

## Поставить webdriver.io и нужные плагины
Удобнее всего поставить webdriver.io через npm глобально, т.е. он будет доступен повсюду из командной строки:
```shell
npm install -g webdriverio
```
Кроме того, понадобятся плагины для совместимости webdriver.io и mocha, для красивого вывода результатов тестов (по умолчанию выводится какая-то фигня) и так далее. Вот какие плагины стоит поставить для начала:
```shell
npm install -g wdio-mocha-framework
npm install -g wdio-spec-reporter
```
Другие плагины можете поискать в Интернете.

## Поставить сервер Selenium. 
С webdriverio есть один нюанс - он умеет работать только с Selenium Server. К счастью, поставить и запустить его у себя локально довольно просто.
* Качаем его [по ссылке с официального сайта selenium](http://www.seleniumhq.org/download/). Должен скачаться JAR файл с названием типа selenium-server-standalone-3.0.1.jar
* Сервер запускается из командной строки командой `java -jar selenium-server-standalone-3.0.1.jar`. Пока сервер запущен, webdriver.io может работать. Настраивать ничего больше не нужно, по крайней мере для простого случая.

# Как запускать тесты

После установки webdriver.io через npm, им можно пользоваться из командной строки с помощью команды:
```shell
wdio
```
Если эту команду запустить из папки с проектом, в котором все верно настроено, то запустятся тесты. Затем в консоль выведутся результаты. Все просто!

Если эту команду запустить из папки с ненастроенным проектом (чуть позже поймете о чем речь), то сначала запустится утилита конфигурации. Там вас спросят - какие файлы с тестами хотите запускать, в каких браузерах, какой фреймворк использовать и т.п. и в конце создастся файл `wdio.config.js`. Вот когда такой файл в папке у вас имеется, тогда проект и считается настроенным для webdriver.io (~~теперь ты понял зачем нужны были подтяжки?~~ вот и поняли что такое настроенный проект). В этом конфиге все ваши ответы и будут сохранены как настройки, их можно потом поменять из текстового редактора. [Пример конфига есть на сайте webdriver.io](http://webdriver.io/guide/testrunner/configurationfile.html).

В этом репозитории уже есть заранее созданный конфиг `wdio.config.js`, так что все готово к запуску. Предварительно можете заглянутъ в этот файл и поменять там что пожелаете. Сейчас, например, там все настроено на запуск тестов из файла `lesson3.js` в браузерах Chrome и Firefox одновременно.
